# Relay API Environment Variables

# Database (Railway auto-injects this from Postgres addon)
DATABASE_URL=postgresql://user:password@localhost:5432/relay

# Redis (Railway auto-injects this from Redis addon)
# Leave empty for local dev without Redis (will gracefully degrade)
REDIS_URL=redis://default:password@localhost:6379

# Server (Railway sets PORT automatically)
PORT=3000

# JWT Secret for auth tokens (generate with: openssl rand -base64 32)
JWT_SECRET=your-secure-random-secret-here

# Worker secret for email worker auth (generate with: openssl rand -base64 32)
WORKER_SECRET=your-worker-secret-here

# Email Domain for aliases
EMAIL_DOMAIN=rlymsg.com

# Edge Query Key Salt - CRITICAL for zero-knowledge edge ownership
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# NEVER commit the real value! Store in Railway environment variables.
EDGE_QUERY_KEY_SALT=generate-with-crypto-randomBytes-32-hex

# Redemption Receipt Secret - for identity-blind double-redemption prevention
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# Used to create HMAC receipt keys: HMAC(fingerprint + codeId, SECRET)
REDEMPTION_RECEIPT_SECRET=generate-with-crypto-randomBytes-32-hex

# ============================================
# Cloudflare R2 File Storage
# ============================================

# R2 Endpoint (format: https://<account-id>.r2.cloudflarestorage.com)
R2_ENDPOINT=https://your-account-id.r2.cloudflarestorage.com

# R2 Access Credentials (get from Cloudflare R2 dashboard)
R2_ACCESS_KEY_ID=your-r2-access-key-id
R2_SECRET_ACCESS_KEY=your-r2-secret-access-key

# R2 Bucket Name (create bucket in Cloudflare dashboard)
R2_BUCKET_NAME=relay-files

# R2 Public Domain (optional - for CDN URLs)
# If configured, files will be accessible via: https://<R2_PUBLIC_DOMAIN>/<storage-key>
# Setup: In Cloudflare R2, enable "Public Access" and set a custom domain
R2_PUBLIC_DOMAIN=files.userelay.org

# Max file size in MB (default: 50)
MAX_FILE_SIZE_MB=50

