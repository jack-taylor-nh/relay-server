# Relay Email Worker
# Cloudflare Email Workers configuration

name = "relay-email-worker"
main = "src/index.ts"
compatibility_date = "2024-01-01"

# Email routing
[[email_handlers]]
enabled = true
# Route all emails to @rlymsg.com domain
matches = ".*@rlymsg\\.com"

# Environment variables (set via wrangler secret)
[vars]
API_BASE_URL = "https://api.rlymsg.com"

# KV namespace for caching edge lookups
[[kv_namespaces]]
binding = "EDGE_CACHE"
id = "2d66b32c610b482695fafd2974f70c8b"
preview_id = "3900d1a2439b465d972906983b85b524"

# KV namespace for Double Ratchet state storage
[[kv_namespaces]]
binding = "RATCHET_STATES"
id = "4aa0d8cb81ce40789a2be2ff5a3e8393"
preview_id = "f29182ad4ab143b78b18745c092bea45"
